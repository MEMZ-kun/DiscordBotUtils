1. utils/config_manager.py (設定管理)
役割: ボットの「設定」をすべて管理する、最も重要な基盤です。
主な機能:
.env ファイルから Discordボットトークン などの機密情報を安全に読み込みます。
config.ini ファイルから、ログレベル、DB接続先、権限ロール名など、ボットの動作設定をすべて読み込みます。
他のすべてのユーティリティは、この ConfigManager から設定情報を取得します。

2. utils/bot_logger.py (監査・運用ログ)
役割: ボットの全動作を記録する「監視カメラ」です。
主な機能:
config.ini の設定に基づき、ログの詳細度（DEBUG, INFO, ERRORなど）や、ログの保存先ファイルを設定します。
コンソール（画面）とログファイルの両方に、同じログを出力します。
「コマンド実行ログ」「エラーログ」「イベントログ」を簡単に出力するためのヘルパー関数を提供します。

3. utils/db_manager.py (データベース抽象化)
役割: ボットの「記憶」を担当するデータベースとの通信窓口です。
主な機能:
config.ini の設定に基づき、使用するデータベース（SQLite, PostgreSQLなど）への非同期接続を準備します（SQLAlchemy を使用）。
データベースのテーブル定義（モデル）の基底クラス (Base) を提供します。
GuildSettingRepository のように、特定のテーブルに対するCRUD操作（作成、読み取り、更新、削除）を行うクラスのサンプルを提供します。

4. utils/error_handler.py (汎用エラー処理)
役割: ボットの「防波堤」です。予期せぬエラーでボット全体が停止することを防ぎます。
主な機能:
コマンド実行中に発生したあらゆるエラー（権限不足、引数ミス、APIエラー、バグ）を一括で捕捉します。
エラーの種類を判別します。
ユーザー起因のエラー（権限不足など）: ログには残さず、ユーザーにのみ静かにエラーを通知します。
予期せぬエラー（バグなど）: bot_logger を使って詳細なスタックトレースをログファイルに記録し、config.ini の設定に応じてユーザーに「エラーが発生しました」と通知します。

5. utils/permission_handler.py (厳密な権限管理)
役割: ボットの「警備員」です。誰がどのコマンドを実行できるかを制御します。
主な機能:
config.ini の [Permissions] セクションを読み込み、「ボット管理者（ロール名またはユーザーID）」や「特定機能（例: 'hr_tool'）の許可ロール」を定義します。
コマンドに付与するデコレータ（@admin_only() や @requires_permission('...')）を提供します。
コマンド以外でも使える汎用的な権限チェック関数（is_bot_admin()）を提供します。

6. utils/task_scheduler.py (定期実行タスク)
役割: 「アラーム時計」や「タイマー」のように、指定した時間に特定の処理を自動実行します。
主な機能:
apscheduler ライブラリを使用し、非同期でタスクを実行します。
db_manager と連携し、登録したタスクをデータベースに保存（永続化）します。これにより、ボットが再起動してもスケジュールが消えません。
cron（例: 毎朝9時）、interval（例: 1時間ごと）、date（例: 特定の日時）の3種類のトリガーでタスクを追加できます。

7. main.py (ボット本体・司令塔)
役割: 上記すべてのユーティリティ（部品）を正しい順序で組み立て、ボットを起動する「司令塔」です。
主な機能:
Config, Logger, DB などのユーティリティを初期化します。
discord.py の Bot インスタンスを作成します。
すべてのユーティリティを Bot インスタンスに登録（アタッチ）します。
cogs/ ディレクトリから、ボットの独自機能（コマンド群）をプラグインとして読み込みます。
on_ready（起動時処理）や on_command_error（エラー監視）を設定します。
ボットをDiscordに接続し、起動します。

8. cogs/example_cog.py (独自機能のサンプル)
役割: main.py で読み込まれる「独自機能のプラグイン」の見本です。
主な機能:
今後ボットに新しいコマンドを追加する際の「ひな形」となります。
main.py でアタッチされたユーティリティ（bot.logger や bot.permission_manager）を、Cog内部で正しく呼び出す方法を示しています